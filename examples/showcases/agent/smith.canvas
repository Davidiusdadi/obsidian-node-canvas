{
	"nodes":[
		{"id":"223607f1ff96cfa4","type":"text","text":"","x":526,"y":-883,"width":250,"height":60},
		{"id":"d9ac6d93fe988b39","type":"text","text":"","x":-80,"y":-715,"width":60,"height":60},
		{"id":"12855f54ccc65ff5","type":"file","file":"showcases/agent/agent-loop.canvas","x":80,"y":-815,"width":400,"height":260},
		{"id":"683ad91201254578","type":"text","text":"","x":155,"y":-460,"width":250,"height":60},
		{"id":"1d067383ea89eeca","type":"text","text":"```yaml\n#model: \"gpt-3.5-turbo\"\nmessages:\n - role: \"system\"\n   content: \"{{state.system}}\"\n - role: \"user\"\n   content: \"{{input}}\"\nstop:  \"{{ state.stop | json}}\"\n```\n\n\n","x":20,"y":-300,"width":520,"height":260,"color":"6"},
		{"id":"4de193a1703e939e","type":"text","text":"\n```ts\nreturn input.response\n```\nraw gpt response","x":137,"y":0,"width":287,"height":120},
		{"id":"2ca16c13ec3e527d","type":"text","text":"**return**","x":155,"y":160,"width":250,"height":60,"color":"2"},
		{"id":"0679ae46c4dc021e","type":"text","text":"","x":244,"y":-1287,"width":72,"height":60},
		{"id":"b51e325ea3f428cd","type":"text","text":"start","x":-560,"y":-1820,"width":116,"height":60,"color":"6"},
		{"id":"5b4a9960f05ef48b","type":"text","text":"```ts\nreturn `\nCreate a bash file that contains a program\nthat reverses its command line arguments.\nMake sure to not override any exiting files.\n`\n```","x":-712,"y":-1660,"width":592,"height":220},
		{"id":"bc0effce8c79f36d","type":"text","text":"","x":-230,"y":-714,"width":63,"height":60},
		{"id":"b22ba6aa58e5458c","type":"text","text":"```ts\nstate.messages.push({\n    type: state.phase,\n    msg: input\n})\n```","x":700,"y":-594,"width":360,"height":209},
		{"id":"5650b25faed7a2e4","type":"text","text":"**debug**:","x":755,"y":-330,"width":250,"height":60},
		{"id":"e5aa2a14be9c9020","type":"text","text":"**return**","x":821,"y":-200,"width":118,"height":60,"color":"2"},
		{"id":"614cb021caff713e","type":"text","text":"","x":755,"y":-714,"width":250,"height":60},
		{"id":"55c44735ffe7276e","type":"text","text":"```ts\nimport _ from 'lodash'\nimport chalk from 'chalk'\n\nstate.system = \n`Answer the following questions as best you can. You have access to the following tools:\n\n${state.tools}\n\nUse the following format:\n\nThought: you should always think about what to do\nAction: the action to take, should be one of [${state.tool_names}]\nAction Input: the input to the action\nObservation: the result of the action\n... (this Thought/Action/Action Input/Observation can repeat N times)\nThought: I now know the final answer\nFinal Answer: the final answer to the original input question\n\n\nBegin!\n\n`\nlet message = state.messages\n\t.map(m => {\n\tif(m.msg.startsWith(m.type)) {\n\t\treturn m.msg\n\t}\n\treturn `${m.type}: ${m.msg}`\n\t}\n);\n\n\ncolor = chalk.white\n\n\nswitch (state.phase) {  \n   case 'Observation': \n\t   state.stop = ['Thought:'];\n\t   color = chalk.cyan\n\t   break;  \n   case 'Thought': \n       state.stop = ['Action:'];\n       color = chalk.magenta\n       break;  \n   case 'Action': \n\t   state.stop = ['Observation:']; \n\t   color = chalk.yellow\n\t   break;\n   default: state.stop = [];\n}\n\nconsole.log(color(_.last(message)))\n\nreturn `\n${message}\n${state.phase}:\n`\n```","x":1280,"y":-1729,"width":680,"height":1045},
		{"id":"8a3bef1952d73fcd","type":"text","text":"","x":-230,"y":-798,"width":63,"height":60},
		{"id":"a961ec59af815223","type":"text","text":"```ts\nstate.messages = [{\n    type: 'Question',\n    msg: input\n}]\nstate.tools = `bash - this calles a linux terminal`\n\nstate.tool_names = `bash`\n\n```","x":-712,"y":-1287,"width":519,"height":347},
		{"id":"274d1a086030646b","type":"file","file":"showcases/agent/agent-phase.canvas","x":-785,"y":-792,"width":186,"height":109},
		{"id":"0c9040f53c786a47","type":"text","text":"```ts\nimport _ from 'lodash'\n\nconst last_msg = _.last(state.messages)\nstate.last_msg = last_msg\nconst action = last_msg.msg\n\nreturn action\n```","x":-861,"y":-583,"width":461,"height":218},
		{"id":"d4486560eac8fa40","type":"file","file":"showcases/agent/tool-use.canvas","x":-960,"y":-240,"width":400,"height":400},
		{"id":"1ae7c69a34cf9d35","type":"text","text":"```ts\n\nstate.last_msg.msg += `\nTool Output: ${input || '<empty output>'}`\n```","x":-480,"y":-265,"width":440,"height":145},
		{"id":"7015c360ced2d4ec","x":651,"y":-1287,"width":250,"height":60,"type":"text","text":""},
		{"id":"89c16efc2e20aeb5","type":"text","text":"**return**","x":1561,"y":-594,"width":118,"height":60,"color":"2"}
	],
	"edges":[
		{"id":"9f12e24fc3a87cee","fromNode":"274d1a086030646b","fromSide":"right","toNode":"bc0effce8c79f36d","toSide":"left","toEnd":"none","color":"3","label":"thought"},
		{"id":"f25b274ba75e240d","fromNode":"274d1a086030646b","fromSide":"right","toNode":"8a3bef1952d73fcd","toSide":"left","toEnd":"none","color":"3","label":"action"},
		{"id":"9532c046203531cc","fromNode":"274d1a086030646b","fromSide":"left","toNode":"0c9040f53c786a47","toSide":"left","toEnd":"none","color":"3","label":"observe"},
		{"id":"bda04a9d65853bcd","fromNode":"bc0effce8c79f36d","fromSide":"right","toNode":"d9ac6d93fe988b39","toSide":"left"},
		{"id":"ae0a5881076ea416","fromNode":"d9ac6d93fe988b39","fromSide":"right","toNode":"12855f54ccc65ff5","toSide":"left","color":"6","label":"cycle"},
		{"id":"0eee9fb280b7f217","fromNode":"12855f54ccc65ff5","fromSide":"top","toNode":"0679ae46c4dc021e","toSide":"bottom","toEnd":"none","color":"3","label":"build-prompt"},
		{"id":"8329a581559b8ee9","fromNode":"12855f54ccc65ff5","fromSide":"bottom","toNode":"683ad91201254578","toSide":"top","toEnd":"none","color":"3","label":"llm-completion"},
		{"id":"79fd962a182293d0","fromNode":"12855f54ccc65ff5","fromSide":"right","toNode":"614cb021caff713e","toSide":"left","color":"6","label":"answer"},
		{"id":"44434e0e6f8e2207","fromNode":"4de193a1703e939e","fromSide":"bottom","toNode":"2ca16c13ec3e527d","toSide":"top"},
		{"id":"5e71587ada16e59c","fromNode":"5650b25faed7a2e4","fromSide":"bottom","toNode":"e5aa2a14be9c9020","toSide":"top"},
		{"id":"5c1b9d87f23ec1f5","fromNode":"683ad91201254578","fromSide":"bottom","toNode":"1d067383ea89eeca","toSide":"top"},
		{"id":"1df98d8c18e0984c","fromNode":"1d067383ea89eeca","fromSide":"bottom","toNode":"4de193a1703e939e","toSide":"top"},
		{"id":"84b5db870d50429c","fromNode":"a961ec59af815223","fromSide":"bottom","toNode":"274d1a086030646b","toSide":"top","label":"kick-off"},
		{"id":"9db68f625a45c90c","fromNode":"b51e325ea3f428cd","fromSide":"bottom","toNode":"5b4a9960f05ef48b","toSide":"top"},
		{"id":"8ec20f7e7bc09b21","fromNode":"5b4a9960f05ef48b","fromSide":"bottom","toNode":"a961ec59af815223","toSide":"top"},
		{"id":"fa01ba5ebacc090d","fromNode":"55c44735ffe7276e","fromSide":"bottom","toNode":"89c16efc2e20aeb5","toSide":"top"},
		{"id":"7c57e961a523fd11","fromNode":"b22ba6aa58e5458c","fromSide":"bottom","toNode":"5650b25faed7a2e4","toSide":"top"},
		{"id":"484496a52f1c2379","fromNode":"614cb021caff713e","fromSide":"bottom","toNode":"b22ba6aa58e5458c","toSide":"top"},
		{"id":"35f2f50185842838","fromNode":"8a3bef1952d73fcd","fromSide":"right","toNode":"d9ac6d93fe988b39","toSide":"left"},
		{"id":"5e17299b56b64ddb","fromNode":"1ae7c69a34cf9d35","fromSide":"top","toNode":"d9ac6d93fe988b39","toSide":"bottom"},
		{"id":"b5e7777580779176","fromNode":"0c9040f53c786a47","fromSide":"bottom","toNode":"d4486560eac8fa40","toSide":"top","color":"6","label":"use-tool"},
		{"id":"3a45067e0ce680cf","fromNode":"d4486560eac8fa40","fromSide":"right","toNode":"1ae7c69a34cf9d35","toSide":"bottom","color":"6","label":" tool-resp"},
		{"id":"0de94801d8a44cb6","fromNode":"0679ae46c4dc021e","fromSide":"right","toNode":"7015c360ced2d4ec","toSide":"left"},
		{"id":"670b3fa4a5231550","fromNode":"7015c360ced2d4ec","fromSide":"right","toNode":"55c44735ffe7276e","toSide":"left"}
	]
}